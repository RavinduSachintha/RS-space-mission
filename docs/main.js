!function(){"use strict";!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}("body{text-align:center;background-color:#404040}#canvas1{margin-top:20px;border:1px solid grey}");let t,e,i={};function s(t,e){i[t]=i[t]||[],i[t].push(e)}function n(t,...e){(i[t]||[]).map(t=>t(...e))}function h(){return t}function o(){return e}let r=/(jpeg|jpg|gif|png)$/,a=/(wav|mp3|ogg|aac)$/,l=/^\//,c=/\/$/,d=new WeakMap;function u(t,e){return new URL(t,e).href}function _(t,e){return[t.replace(c,""),t?e.replace(l,""):e].filter(t=>t).join("/")}function p(t){return t.split(".").pop()}function f(t){let e=t.replace("."+p(t),"");return 2==e.split("/").length?e.replace(l,""):e}let y={},g={},x={};function w(){window.__k||(window.__k={dm:d,u:u,d:x,i:y})}function m(...t){return w(),Promise.all(t.map(t=>{let e=p([].concat(t)[0]);return e.match(r)?(i=t,w(),new Promise((t,e)=>{let s,h,o;if(s=_("",i),y[s])return t(y[s]);h=new Image,h.onload=function(){o=u(s,window.location.href),y[f(i)]=y[s]=y[o]=this,n("assetLoaded",this,i),t(this)},h.onerror=function(){e("Unable to load image "+s)},h.src=s})):e.match(a)?function(t){return new Promise((e,i)=>{let s,h,o,r,a=t;var l;return s=new Audio,h={wav:(l=s).canPlayType('audio/wav; codecs="1"'),mp3:l.canPlayType("audio/mpeg;"),ogg:l.canPlayType('audio/ogg; codecs="vorbis"'),aac:l.canPlayType("audio/aac;")},(t=[].concat(t).reduce((t,e)=>t||(h[p(e)]?e:null),0))?(o=_("",t),g[o]?e(g[o]):(s.addEventListener("canplay",(function(){r=u(o,window.location.href),g[f(t)]=g[o]=g[r]=this,n("assetLoaded",this,t),e(this)})),s.onerror=function(){i("Unable to load audio "+o)},s.src=o,void s.load())):i("cannot play any of the audio formats provided "+a)})}(t):function(t){let e,i;return w(),e=_("",t),x[e]?Promise.resolve(x[e]):fetch(e).then(t=>{if(!t.ok)throw t;return t.clone().json().catch(()=>t.text())}).then(s=>(i=u(e,window.location.href),"object"==typeof s&&d.set(s,i),x[f(t)]=x[e]=x[i]=s,n("assetLoaded",s,t),s))}(t);var i}))}function v(t){return t*Math.PI/180}function B(t,e,i){return Math.min(Math.max(t,i),e)}class b{constructor(t=0,e=0,i={}){this.x=t,this.y=e,i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}add(t){return new b(this.x+t.x,this.y+t.y,this)}subtract(t){return new b(this.x-t.x,this.y-t.y,this)}scale(t){return new b(this.x*t,this.y*t)}normalize(t=this.length()){return new b(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}clamp(t,e,i,s){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=s}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?B(this._a,this._d,t):t}set y(t){this._y=this._c?B(this._b,this._e,t):t}}function T(){return new b(...arguments)}T.prototype=b.prototype,T.class=b;const P=()=>{};class D extends class{constructor(t){return this.init(t)}init(t={}){this.position=T(),this.velocity=T(),this.acceleration=T(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}{init({width:t=0,height:e=0,context:i=o(),render:s=this.draw,update:n=this.advance,children:h=[],anchor:r={x:0,y:0},sx:a=0,sy:l=0,opacity:c=1,rotation:d=0,scaleX:u=1,scaleY:_=1,...p}={}){this.children=[],super.init({width:t,height:e,context:i,anchor:r,sx:a,sy:l,opacity:c,rotation:d,scaleX:u,scaleY:_,...p}),this._di=!0,this._uw(),h.map(t=>this.addChild(t)),this._rf=s,this._uf=n}update(t){this._uf(t),this.children.map(t=>t.update&&t.update())}render(t){let e=this.context;e.save(),(this.x||this.y)&&e.translate(this.x,this.y),this.rotation&&e.rotate(this.rotation),(this.sx||this.sy)&&e.translate(-this.sx,-this.sy),1==this.scaleX&&1==this.scaleY||e.scale(this.scaleX,this.scaleY);let i=-this.width*this.anchor.x,s=-this.height*this.anchor.y;(i||s)&&e.translate(i,s),this.context.globalAlpha=this.opacity,this._rf(),(i||s)&&e.translate(-i,-s);let n=this.children;t&&(n=n.filter(t)),n.map(t=>t.render&&t.render()),e.restore()}draw(){}_pc(t,e){this._uw(),this.children.map(t=>t._pc())}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:s=0,_wsx:n=1,_wsy:h=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wr=s+this.rotation;let{x:o,y:r}=function(t,e){let i=Math.sin(e),s=Math.cos(e);return{x:t.x*s-t.y*i,y:t.x*i+t.y*s}}({x:this.x,y:this.y},s);this._wx=o,this._wy=r,this._wsx=n*this.scaleX,this._wsy=h*this.scaleY,this._wx=this.x*n,this._wy=this.y*h,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}addChild(t,{absolute:e=!1}={}){this.children.push(t),t.parent=this,t._pc=t._pc||P,t._pc()}removeChild(t){let e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),t.parent=null,t._pc())}get opacity(){return this._opa}set opacity(t){this._opa=t,this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}function R(){return new D(...arguments)}R.prototype=D.prototype,R.class=D;class G extends R.class{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...s}={}){super.init({image:t,width:e,height:i,...s})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation=this.animations[t],this.currentAnimation.loop||this.currentAnimation.reset()}advance(t){super.advance(t),this.currentAnimation&&this.currentAnimation.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function S(){return new G(...arguments)}S.prototype=G.prototype,S.class=G;let F=/(\d+)(\w+)/;class M extends R.class{init({text:t="",textAlign:e="",lineHeight:i=1,font:s=o().font,...n}={}){super.init({text:t,textAlign:e,lineHeight:i,font:s,...n}),this._p()}get width(){return this._w}set width(t){this._d=!0,this._w=t,this._fw=t}get text(){return this._t}set text(t){this._d=!0,this._t=t}get font(){return this._f}set font(t){this._d=!0,this._f=t,this._fs=function(t){let e=t.match(F),i=+e[1];return{size:i,unit:e[2],computed:i}}(t).computed}get lineHeight(){return this._lh}set lineHeight(t){this._d=!0,this._lh=t}render(){this._d&&this._p(),super.render()}_p(){this._s=[],this._d=!1;let t=this.context;if(t.font=this.font,!this._s.length&&this._fw){let e=this.text.split(" "),i=0,s=2;for(;s<=e.length;s++){let n=e.slice(i,s).join(" ");t.measureText(n).width>this._fw&&(this._s.push(e.slice(i,s-1).join(" ")),i=s-1)}this._s.push(e.slice(i,s).join(" "))}if(!this._s.length&&this.text.includes("\n")){let e=0;this.text.split("\n").map(i=>{this._s.push(i),e=Math.max(e,t.measureText(i).width)}),this._w=this._fw||e}this._s.length||(this._s.push(this.text),this._w=this._fw||t.measureText(this.text).width),this.height=this._fs+(this._s.length-1)*this._fs*this.lineHeight,this._uw()}draw(){let t=0,e=this.textAlign,i=this.context;e=this.textAlign||("rtl"===i.canvas.dir?"right":"left"),t="right"===e?this.width:"center"===e?this.width/2|0:0,this._s.map((s,n)=>{i.textBaseline="top",i.textAlign=e,i.fillStyle=this.color,i.font=this.font,i.fillText(s,t,this._fs*this.lineHeight*n)})}}function C(){return new M(...arguments)}C.prototype=M.prototype,C.class=M;let E=new WeakMap,k={},A={},L={0:"left",1:"middle",2:"right"};function X(t,e){let{x:i,y:s,width:n,height:h}=function(t){let{x:e,y:i,width:s,height:n}=t.world||t;return t.anchor&&(e-=s*t.anchor.x,i-=n*t.anchor.y),s<0&&(e+=s,s*=-1),n<0&&(i+=n,n*=-1),{x:e,y:i,width:s,height:n}}(t);do{i-=t.sx||0,s-=t.sy||0}while(t=t.parent);let o=e.x-Math.max(i,Math.min(e.x,i+n)),r=e.y-Math.max(s,Math.min(e.y,s+h));return o*o+r*r<e.radius*e.radius}function I(t){let e=t._lf.length?t._lf:t._cf;for(let i=e.length-1;i>=0;i--){let s=e[i];if(s.collidesWithPointer?s.collidesWithPointer(t):X(s,t))return s}}function W(t,e){return parseFloat(t.getPropertyValue(e))||0}function Y(t){let e=void 0!==t.button?L[t.button]:"left";A[e]=!0,O(t,"onDown")}function U(t){let e=void 0!==t.button?L[t.button]:"left";A[e]=!1,O(t,"onUp")}function N(t){O(t,"onOver")}function q(t){E.get(t.target)._oo=null,A={}}function O(t,e){t.preventDefault();let i=t.target,s=E.get(i),{scaleX:n,scaleY:h,offsetX:o,offsetY:r}=function(t){let{canvas:e,_s:i}=t,s=e.getBoundingClientRect(),n="none"!==i.transform?i.transform.replace("matrix(","").split(","):[1,1,1,1],h=parseFloat(n[0]),o=parseFloat(n[3]),r=(W(i,"border-left-width")+W(i,"border-right-width"))*h,a=(W(i,"border-top-width")+W(i,"border-bottom-width"))*o,l=(W(i,"padding-left")+W(i,"padding-right"))*h,c=(W(i,"padding-top")+W(i,"padding-bottom"))*o;return{scaleX:(s.width-r-l)/e.width,scaleY:(s.height-a-c)/e.height,offsetX:s.left+(W(i,"border-left-width")+W(i,"padding-left"))*h,offsetY:s.top+(W(i,"border-top-width")+W(i,"padding-top"))*o}}(s);if(-1!==["touchstart","touchmove","touchend"].indexOf(t.type)){s.touches={};for(var a=0;a<t.touches.length;a++)s.touches[t.touches[a].identifier]={id:t.touches[a].identifier,x:(t.touches[a].clientX-o)/n,y:(t.touches[a].clientY-r)/h,changed:!1};for(a=t.changedTouches.length;a--;){const i=t.changedTouches[a].identifier;void 0!==s.touches[i]&&(s.touches[i].changed=!0);let l=t.changedTouches[a].clientX,c=t.changedTouches[a].clientY;s.x=(l-o)/n,s.y=(c-r)/h;let d=I(s);d&&d[e]&&d[e](t),k[e]&&k[e](t,d)}}else{s.x=(t.clientX-o)/n,s.y=(t.clientY-r)/h;let i=I(s);i&&i[e]&&i[e](t),k[e]&&k[e](t,i),"onOver"==e&&(i!=s._oo&&s._oo&&s._oo.onOut&&s._oo.onOut(t),s._oo=i)}}class j extends S.class{init({padX:t=0,padY:e=0,text:i,onDown:s,onUp:n,...o}={}){super.init({padX:t,padY:e,...o}),this.textNode=C({...i,context:this.context}),this.width||(this.width=this.textNode.width,this.height=this.textNode.height),function(...t){t.map(t=>{let e=t.context?t.context.canvas:h(),i=E.get(e);if(!i)throw new ReferenceError("Pointer events not initialized for the objects canvas");t._r||(t._r=t.render,t.render=function(){i._cf.push(this),this._r()},i._o.push(t))})}(this),this.addChild(this.textNode),this._od=s||P,this._ou=n||P;const r=this._dn=document.createElement("button");r.style="position:absolute;left:-9999px",r.textContent=this.text,r.addEventListener("focus",()=>this.focus()),r.addEventListener("blur",()=>this.blur()),r.addEventListener("keydown",t=>this._kd(t)),r.addEventListener("keyup",t=>this._ku(t)),function(t,e){let i=e.parentNode;if(t.setAttribute("data-kontra",""),i){let s=i.querySelector("[data-kontra]:last-of-type")||e;i.insertBefore(t,s.nextSibling)}else document.body.appendChild(t)}(r,this.context.canvas),this._uw(),this._p()}get text(){return this.textNode.text}set text(t){this._d=!0,this.textNode.text=t}destroy(){this._dn.remove()}_p(){this.text!==this._dn.textContent&&(this._dn.textContent=this.text),this.textNode._p();let t=this.textNode.width+2*this.padX,e=this.textNode.height+2*this.padY;this.width=Math.max(t,this.width),this.height=Math.max(e,this.height),this._uw()}render(){this._d&&this._p(),super.render()}enable(){this.disabled=this._dn.disabled=!1,this.onEnable()}disable(){this.disabled=this._dn.disabled=!0,this.onDisable()}focus(){this.disabled||(this.focused=!0,document.activeElement!=this._dn&&this._dn.focus(),this.onFocus())}blur(){this.focused=!1,document.activeElement==this._dn&&this._dn.blur(),this.onBlur()}onOver(){this.disabled||(this.hovered=!0)}onOut(){this.hovered=!1}onEnable(){}onDisable(){}onFocus(){}onBlur(){}onDown(){this.disabled||(this.pressed=!0,this._od())}onUp(){this.disabled||(this.pressed=!1,this._ou())}_kd(t){"Enter"!=t.code&&"Space"!=t.code||this.onDown()}_ku(t){"Enter"!=t.code&&"Space"!=t.code||this.onUp()}}function z(){return new j(...arguments)}function H(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}z.prototype=j.prototype,z.class=j;let $={},K={},V={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"left",ArrowUp:"up",ArrowRight:"right",ArrowDown:"down"};function J(t){let e=V[t.code];K[e]=!0,$[e]&&$[e](t)}function Q(t){K[V[t.code]]=!1}function Z(){K={}}function tt(t){return!!K[t]}var et=function(i){if(t=document.getElementById(i)||i||document.querySelector("canvas"),!t)throw Error("You must provide a canvas element for the game");return e=t.getContext("2d"),e.imageSmoothingEnabled=!1,n("init"),{canvas:t,context:e}}("canvas1"),it=et.canvas,st=et.context,nt={BG_BRD_W:5,BG_BRD_OFS:30,BG_BRD_L:5,BG_BRD_R:it.width-5,BG_BRD_U:5,BG_BRD_D:it.height-5,BG_TXT_W:20,BG_SPC_W:it.width-10,BG_SPC_H:it.height-10},ht={player:null,enemies:[],stars:[],bullets:[],smokes:[]},ot={numOfItems:0,assetsLoaded:0};function rt(t,e,i,s,n,h){return S({x:t,y:e,dx:i,dy:s,width:4,height:4,radius:4,color:n,energy:1,ttl:100,type:"bullet",by:h})}function at(){return S({x:50,y:(nt.BG_BRD_D-nt.BG_BRD_U)/2,type:"player",anchor:{x:.5,y:.5},radius:24,dt:0,action:"default",isEnable:!1,isDestroyed:!1,maxSpeed:3.5,energy:100,lifeTime:0,render:function(){var t,e;t=this.action,e=this.radius,t=t||"default",e=e||0,st.translate(-e,0),st.beginPath(),st.moveTo(25,-5),st.lineTo(20,-12),st.lineTo(9,-11),st.lineTo(8,-9),st.lineTo(18,-4),st.lineTo(18,4),st.lineTo(8,9),st.lineTo(9,11),st.lineTo(20,12),st.lineTo(25,5),st.closePath(),st.fillStyle="#CCCCCC",st.fill(),st.beginPath(),st.moveTo(3,0),st.quadraticCurveTo(36,-15,48,0),st.moveTo(3,0),st.quadraticCurveTo(36,15,48,0),st.closePath(),st.fillStyle="#48A0DC",st.fill(),st.beginPath(),st.arc(36,0,5,0,2*Math.PI),st.closePath(),st.fillStyle="#4D4D4D",st.fill(),st.beginPath(),st.arc(36,0,3,0,2*Math.PI),st.closePath(),st.fillStyle="#FFF",st.fill(),st.beginPath(),st.moveTo(12,-4),st.lineTo(12,4),st.lineTo(9,3),st.lineTo(9,-3),st.closePath(),st.fillStyle="#387AA7",st.fill(),st.beginPath(),st.moveTo(9,-3),"default"===t?st.bezierCurveTo(-8,-2,-8,2,9,3):"turn-left"===t?st.bezierCurveTo(-8,-5,-8,-1,9,3):"turn-right"===t&&st.bezierCurveTo(-8,1,-8,5,9,3),st.closePath(),st.fillStyle="#FFCC66",st.fill(),st.beginPath(),st.moveTo(9,-1.5),"default"===t?st.bezierCurveTo(-4,-1,-4,1,9,1.5):"turn-left"===t?st.bezierCurveTo(-4,-3.5,-4,-1.5,9,1.5):"turn-right"===t&&st.bezierCurveTo(-4,1.5,-4,3.5,9,1.5),st.closePath(),st.fillStyle="#ED7161",st.fill(),"destroyed"===t&&(st.translate(24,0),st.beginPath(),st.moveTo(0,-30),st.lineTo(10,-11),st.lineTo(30,-7),st.lineTo(16,9),st.lineTo(19,30),st.lineTo(0,21),st.lineTo(-19,30),st.lineTo(-16,9),st.lineTo(-30,-7),st.lineTo(-10,-11),st.closePath(),st.fillStyle="#FFA500",st.fill(),st.beginPath(),st.moveTo(0,-15),st.lineTo(5,-5.5),st.lineTo(15,-3.5),st.lineTo(8,4.5),st.lineTo(9.5,15),st.lineTo(0,10.5),st.lineTo(-9.5,15),st.lineTo(-8,4.5),st.lineTo(-15,-3.5),st.lineTo(-5,-5.5),st.closePath(),st.fillStyle="#F00",st.fill())},update:function(){this.action="default",tt("left")&&(this.action="turn-left",this.rotation+=v(-3)*(this.velocity.length()/this.maxSpeed)),tt("right")&&(this.action="turn-right",this.rotation+=v(3)*(this.velocity.length()/this.maxSpeed)),(this.x<nt.BG_BRD_L||this.x>nt.BG_BRD_R||this.y<nt.BG_BRD_U+nt.BG_TXT_W||this.y>nt.BG_BRD_D)&&(this.isEnable=!1,this.isDestroyed=!0);var t=Math.cos(this.rotation),e=Math.sin(this.rotation);if(this.isEnable?(this.ddx=.05*t,this.ddy=.05*e,this.lifeTime++):(this.ddx=0,this.ddy=0,this.dx=0,this.dy=0),this.advance(),this.velocity.length()>this.maxSpeed&&(this.dx*=.95,this.dy*=.95),this.dt+=1/60,tt("space")&&this.dt>.25){this.dt=0;var i=rt(this.x+25*t,this.y+25*e,this.dx+5*t,this.dy+5*e,"#FF0","player");ht.bullets.push(i)}this.isDestroyed&&(this.action="destroyed")}})}s("assetLoaded",(function(t,e){ot.assetsLoaded++}));var lt=[[Math.round(.35*nt.BG_SPC_W),Math.round(Math.random()*(nt.BG_SPC_H-75)+60)],[Math.round(.6*nt.BG_SPC_W),Math.round(Math.random()*(nt.BG_SPC_H-75)+60)],[Math.round(.9*nt.BG_SPC_W),Math.round(Math.random()*(nt.BG_SPC_H-75)+60)]];function ct(t,e,i,s,n){for(var h=[],o=0;o<t;o++)h.push(S({x:e+40*(Math.random()-.5),y:i+50*Math.random(),dx:s*(Math.random()-.5)*2,dy:n,type:"smoke",width:2,height:5,color:"#FFF",ttl:10}));return h}function dt(){return z({x:nt.BG_BRD_R-80,y:nt.BG_TXT_W-nt.BG_BRD_W,anchor:{x:.5,y:.5},text:{text:"Click To Start",color:"white",font:"12px Arial, sans-serif",anchor:{x:.2,y:.45}},onUp:function(){ht.player.isEnable=!0,ht.player.isDestroyed=!1},render:function(){st.translate(0,0),st.beginPath(),st.rect(0,-4,115,20),st.closePath(),st.fillStyle="#000",st.fill(),ht.player.isEnable&&(this.disabled=!0,this.textNode.anchor.x=0,this.textNode.text=function(t){var e=parseInt(t,10),i=Math.floor(e/3600),s=Math.floor((e-3600*i)/60),n=e-3600*i-60*s;i<10&&(i="0"+i);s<10&&(s="0"+s);n<10&&(n="0"+n);return i+":"+s+":"+n}(ht.player.lifeTime)),this.hovered?(this.textNode.color="skyblue",it.style.cursor="pointer"):(this.textNode.color="white",it.style.cursor="initial")}})}document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1" async><\/script>'),m().then((function(){if(ot.assetsLoaded==ot.numOfItems){!function(){let t;for(t=0;t<26;t++)V[t+65]=V["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)V[48+t]=V["Digit"+t]=""+t;window.addEventListener("keydown",J),window.addEventListener("keyup",Q),window.addEventListener("blur",Z)}(),function(t=h()){let e=E.get(t);if(!e){let i=window.getComputedStyle(t);e={x:0,y:0,radius:5,touches:{},canvas:t,_cf:[],_lf:[],_o:[],_oo:null,_s:i},E.set(t,e)}t.addEventListener("mousedown",Y),t.addEventListener("touchstart",Y),t.addEventListener("mouseup",U),t.addEventListener("touchend",U),t.addEventListener("touchcancel",U),t.addEventListener("blur",q),t.addEventListener("mousemove",N),t.addEventListener("touchmove",N),e._t||(e._t=!0,s("tick",()=>{e._lf.length=0,e._cf.map(t=>{e._lf.push(t)}),e._cf.length=0}))}(),function(t){for(var e=[],i=0;i<t;i++){var s=S({x:Math.random()*(nt.BG_BRD_R-nt.BG_BRD_L-75)+50,y:Math.random()*(nt.BG_BRD_D-nt.BG_BRD_U-75)+50,type:"star",opacity:.4*Math.random(),scaleX:.2,scaleY:.2,render:function(){st.translate(0,0),st.beginPath(),st.moveTo(0,-15),st.lineTo(5,-5.5),st.lineTo(15,-3.5),st.lineTo(8,4.5),st.lineTo(9.5,15),st.lineTo(0,10.5),st.lineTo(-9.5,15),st.lineTo(-8,4.5),st.lineTo(-15,-3.5),st.lineTo(-5,-5.5),st.closePath(),st.fillStyle="#FFF",st.fill()}});e.push(s)}return e}(100).forEach((function(t){return ht.stars.push(t)})),function(){for(var t=[],e=0;e<3;e++){var i=lt[e],s=S({x:i[0],y:i[1],anchor:{x:.5,y:.5},type:"enemy",energy:20,shaking:0,rotation:v(30*(Math.random()-.5)),action:"default",radius:32,range:120,isFiring:!1,dt:0,render:function(){var t,e;this.action,t=(t=this.radius)||0,e=(e=this.energy)||20,st.translate(-t,0),st.beginPath(),st.ellipse(t,10,14,8,0,0,2*Math.PI),st.closePath(),st.fillStyle="#FFA500",st.fill(),st.beginPath(),st.ellipse(t,-8,12,12,0,0,2*Math.PI),st.closePath(),st.fillStyle="#FF0",st.fill(),st.lineWidth=2,st.beginPath(),st.ellipse(t,-8,12,12,0,0,2*Math.PI),st.closePath(),st.strokeStyle="#080",st.stroke(),st.beginPath(),st.moveTo(12,0),st.lineTo(4,-20),st.lineTo(6,-20),st.lineTo(20,0),st.closePath(),st.fillStyle="#080",st.fill(),st.beginPath(),st.arc(5,-20,2,0,2*Math.PI),st.closePath(),st.fillStyle="#FFA500",st.fill(),st.beginPath(),st.moveTo(52,0),st.lineTo(60,-20),st.lineTo(58,-20),st.lineTo(44,0),st.closePath(),st.fillStyle="#080",st.fill(),st.beginPath(),st.arc(59,-20,2,0,2*Math.PI),st.closePath(),st.fillStyle="#FFA500",st.fill(),st.beginPath(),st.ellipse(t,0,32,12,0,0,2*Math.PI),st.closePath(),st.fillStyle="#0A0",st.fill(),st.beginPath(),st.ellipse(t,0,32,12,0,0,2*Math.PI),st.closePath(),st.strokeStyle="#080",st.stroke(),st.beginPath(),st.arc(t,0,2,0,2*Math.PI),st.arc(t-9,0,2,0,2*Math.PI),st.arc(t+9,0,2,0,2*Math.PI),st.arc(t-18,0,2,0,2*Math.PI),st.arc(t+18,0,2,0,2*Math.PI),st.arc(t-27,0,2,0,2*Math.PI),st.arc(t+27,0,2,0,2*Math.PI),st.closePath(),st.fillStyle="#FFF",st.fill(),st.beginPath(),st.rect(t-10,-30,20*e/20,5),st.closePath(),st.fillStyle="#F00",st.fill(),st.lineWidth=1,st.beginPath(),st.rect(t-10,-30,20,5),st.closePath(),st.strokeStyle="#FF8080",st.stroke()},update:function(){if(0==this.shaking?(this.rotation+=v(-1.5),this.shaking=this.rotation>v(-20)?0:1):1==this.shaking&&(this.rotation+=v(1.5),this.shaking=this.rotation<v(20)?1:0),this.dt+=1/60,this.isFiring&&this.dt>.1){var t=Math.hypot(ht.player.x-this.x,ht.player.y-this.y),e=(ht.player.x-this.x)/t,i=(ht.player.y-this.y)/t,s=rt(this.x,this.y,4*e,4*i,"#AFA","enemy");ht.bullets.push(s)}this.dt>.1&&(this.dt=0,ct(15,this.x,this.y+15,1,2).forEach((function(t){return ht.smokes.push(t)})))}});t.push(s)}return t}().forEach((function(t){return ht.enemies.push(t)})),ht.player=at();var t=dt(),e=z({x:nt.BG_BRD_R-201,y:nt.BG_TXT_W-nt.BG_BRD_W,anchor:{x:.5,y:.5},text:{text:"Full Screen",color:"white",font:"12px Arial, sans-serif",anchor:{x:.05,y:.45}},onUp:function(){it.requestFullscreen?(it.requestFullscreen(),it.width=screen.width,it.height=screen.height):it.mozRequestFullScreen?it.mozRequestFullScreen():it.webkitRequestFullscreen?it.webkitRequestFullscreen():it.msRequestFullscreen&&it.msRequestFullscreen()},render:function(){st.translate(0,0),st.beginPath(),st.rect(0,-4,115,20),st.closePath(),st.fillStyle="#000",st.fill(),this.hovered?(this.textNode.color="skyblue",it.style.cursor="pointer"):(this.textNode.color="white",it.style.cursor="initial")}});(function({fps:t=60,clearCanvas:e=!0,update:i=P,render:s,context:h=o()}={}){if(!s)throw Error("You must provide a render() function");let r,a,l,c,d,u=0,_=1e3/t,p=1/t,f=e?H:P;function y(){if(a=requestAnimationFrame(y),l=performance.now(),c=l-r,r=l,!(c>1e3)){for(n("tick"),u+=c;u>=_;)d.update(p),u-=_;f(h),d.render()}}return d={update:i,render:s,isStopped:!0,start(){r=performance.now(),this.isStopped=!1,requestAnimationFrame(y)},stop(){this.isStopped=!0,cancelAnimationFrame(a)},_frame:y,set _last(t){r=t}},d})({update:function(){ht.player.update(),ht.enemies.map((function(t){t.update(),ht.bullets.forEach((function(e){"player"===e.by&&Math.hypot(t.x-e.x,t.y-e.y)<t.radius+e.radius&&(t.energy-=e.energy,e.ttl=0),"enemy"===e.by&&Math.hypot(ht.player.x-e.x,ht.player.y-e.y)<ht.player.radius+e.radius&&(ht.player.energy-=e.energy,e.ttl=0)}));var e=Math.hypot(t.x-ht.player.x,t.y-ht.player.y);e<t.range?(t.isFiring=!0,e<t.radius+ht.player.radius-10&&(ht.player.isEnable=!1,ht.player.isDestroyed=!0,t.isFiring=!1)):t.isFiring=!1,t.energy<=0&&(t.ttl=0),ht.player.energy<=0&&(ht.player.isEnable=!1,ht.player.isDestroyed=!0)})),ht.smokes.map((function(t){return t.update()})),ht.bullets.map((function(t){return t.update()})),ht.enemies=ht.enemies.filter((function(t){return t.isAlive()})),ht.bullets=ht.bullets.filter((function(t){return t.isAlive()})),ht.smokes=ht.smokes.filter((function(t){return t.isAlive()}))},render:function(){var i;(i=st.createLinearGradient((nt.BG_BRD_R-nt.BG_BRD_L)/2,nt.BG_BRD_U+10,(nt.BG_BRD_R-nt.BG_BRD_L)/2,nt.BG_BRD_D)).addColorStop(0,"#070B34"),i.addColorStop(1,"#854088"),st.fillStyle=i,st.fillRect(nt.BG_BRD_L,nt.BG_BRD_U+nt.BG_TXT_W,nt.BG_BRD_R-nt.BG_BRD_L,nt.BG_BRD_D-nt.BG_BRD_U-nt.BG_TXT_W),ht.stars.map((function(t){return t.render()})),ht.enemies.map((function(t){return t.render()})),ht.smokes.map((function(t){return t.render()})),ht.player.render(),ht.bullets.map((function(t){return t.render()})),function(){st.fillStyle="#FFF",st.fillRect(nt.BG_BRD_L,nt.BG_BRD_U,nt.BG_BRD_R-nt.BG_BRD_L,nt.BG_TXT_W);var t=st.createRadialGradient((nt.BG_BRD_R-nt.BG_BRD_L)/2,(nt.BG_BRD_D-nt.BG_BRD_U)/2,100,(nt.BG_BRD_R-nt.BG_BRD_L)/2,(nt.BG_BRD_D-nt.BG_BRD_U)/2,(nt.BG_BRD_R-nt.BG_BRD_L)/2+300);t.addColorStop(0,"#FFF"),t.addColorStop(1,"#000"),st.strokeStyle=t,st.lineWidth=nt.BG_BRD_W,st.strokeRect(nt.BG_BRD_L/2,nt.BG_BRD_U/2,nt.BG_BRD_R,nt.BG_BRD_D)}(),t.render(),e.render()}}).start()}})).catch((function(t){console.log(t)}))}();
